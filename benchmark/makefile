#--------------------------------------------------- 
# Target file
#---------------------------------------------------
BENCHMARK = benchmark

#---------------------------------------------------
# Compiler
#---------------------------------------------------
CC = gcc

#---------------------------------------------------
# Options passed to the compiler
#---------------------------------------------------
CFLAGS = -Wall -std=gnu99
DBGFLAGS = -g -O0

#---------------------------------------------------
# Modules loaded
#---------------------------------------------------
LIB_RTS = -lrts
LIB_PTH = -lpthread

#--------------------------------------------------- 
# Dependencies
#---------------------------------------------------
LIB_RTE = rte_cycles

#--------------------------------------------------- 
# Target-specific variables
#---------------------------------------------------
debug: CFLAGS += $(DBGFLAGS)

#--------------------------------------------------- 
# Compile and create objects
#---------------------------------------------------

.PHONY: all debug clean

all: $(BENCHMARK)
	
$(BENCHMARK):
	$(CC) $(CFLAGS) $(LIB_RTE).c $(BENCHMARK).c  $(LIB_RTS) $(LIB_PTH) -o $@

debug: all

clean:
	@rm -rf $(BENCHMARK)